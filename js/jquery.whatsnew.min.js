/*
 * jQuery Whatsnew Plugin
 * version: 1.0  (16-MAY-2013)
 * @requires jQuery v1.9.1 or later
 * @requires jQuery UI v1.10.3 or later if want to the box draggable
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(a){a.fn.whatsnew=function(e){var f=a.extend({eles:[],boxs:[],draggable:true},e);var b=f.eles;var d=f.boxs;var c={initBoxs:function(t,v,w){for(var m in t){var n=a(t[m]);var u=v[m];var r=a(u.dom);var p=undefined;if(m>0){p=(t[parseInt(m)-1])}var k=undefined;if(m<t.length-1){k=t[parseInt(m)+1]}var q=n.outerWidth(true);var j=n.outerHeight(true);var g=r.offset().left;var h=r.offset().top;var s=r.outerWidth(true);var o=r.outerHeight(true);switch(u.position){case"up":var l=[h+o+15,g,-15];break;case"down":var l=[parseInt(h-j-15),g,j-2+"px"];break;case"left":var l=[h,g+s,34];break;case"right":var l=[h,g-q,84];break;default:var l=[0,0,10]}n.css({position:"absolute",opacity:1,top:l[0],left:l[1]});c.initPointer(n,u.position,l[3]);c.initPages(n,m,t.length,p,k);c.bindClose(n);if(m==0){n.show()}if(w!=undefined&&true==w){n.draggable()}}},initPointer:function(i,g,h){i.append('<div class="tu-dialog-pointer-'+g+'" style="top: '+h+'"></div>')},initPages:function(j,i,h,k,g){j.append('<img src="/images/plus3_gh_dots_'+(parseInt(i)+1)+'of3.png"></div>');if(i==h-1){j.append('<a href="#"><button class="iph-finish-button">Finish</button></a>');c.bindFinish(j)}if(i<h-1){j.append('<a href="'+g+'" rel="nextstep"><button class="iph-next-button">Next</button></a>');c.bindNext(j,g)}if(i>0){j.append('<a href="'+k+'" rel="prevstep"><button class="iph-prev-button">Prev</button></a>');c.bindPrev(j,k)}},bindClose:function(g){g.find(".tu-dialog-close").on("click",function(){g.fadeOut("fast");return false})},bindPrev:function(g,h){g.find(".iph-prev-button").on("click",function(){g.hide();a(h).show()})},bindNext:function(h,g){h.find(".iph-next-button").on("click",function(){h.hide();a(g).show()})},bindFinish:function(g){g.find(".iph-finish-button").on("click",function(){g.fadeOut("fast");return false})}};c.initBoxs(d,b,f.draggable)}})(jQuery);